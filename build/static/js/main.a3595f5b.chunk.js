(this["webpackJsonpexpense-tracker"]=this["webpackJsonpexpense-tracker"]||[]).push([[0],{37:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),s=n(30),a=n.n(s),o=(n(37),n(8)),u=n(10),i=n(3),j={userLogout:function(){window.localStorage.removeItem("loggedUser")},userLogin:function(e){window.localStorage.setItem("loggedUser",e)}},d=n(0),l=function(){var e=Object(i.g)(),t=null===window.localStorage.getItem("loggedUser")?{display:"none"}:{display:"block"};return Object(d.jsxs)("div",{className:"nav",children:[Object(d.jsx)("h2",{children:"EXPENSE TRACKER"}),Object(d.jsxs)("ul",{style:t,children:[Object(d.jsx)("li",{children:Object(d.jsx)(u.b,{to:"/home",children:"Home"})}),Object(d.jsx)("li",{children:Object(d.jsx)(u.b,{to:"/expenses",children:"View expenses"})}),Object(d.jsx)("li",{children:Object(d.jsx)("button",{onClick:function(){j.userLogout(),e.push("/"),e.go("/")},children:"Logout"})})]})]})},b=n(6),p=n.n(b),x=n(9),h=n(12),O=n.n(h),f={login:function(){var e=Object(x.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},v=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(""),a=Object(o.a)(s,2),u=a[0],l=a[1],b=Object(c.useState)(""),h=Object(o.a)(b,2),O=h[0],v=h[1],g=Object(i.g)();Object(c.useEffect)((function(){window.localStorage.getItem("loggedUser")&&g.push("/home")}));var m=function(){var e=Object(x.a)(p.a.mark((function e(t){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,f.login({username:n,password:u});case 4:c=e.sent,j.userLogin(JSON.stringify(c)),r(""),l(""),g.push("/home"),g.go("/home"),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),v("Invalid username or password"),setTimeout((function(){v(null)}),3e3);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsx)("div",{className:"login-form",children:Object(d.jsxs)("form",{onSubmit:m,children:[Object(d.jsx)("h2",{children:"Username"}),Object(d.jsx)("input",{onChange:function(e){var t=e.target;return r(t.value)},value:n}),Object(d.jsx)("h2",{children:"Password"}),Object(d.jsx)("input",{onChange:function(e){var t=e.target;return l(t.value)},value:u,type:"password"}),Object(d.jsx)("button",{type:"submit",children:"Sign in"}),Object(d.jsx)("div",{children:O})]})})},g=function(e){var t=e.budget,n=e.sum,c=e.comparison;return Object(d.jsxs)("div",{className:"col",children:[Object(d.jsx)("h2",{children:"Welcome to use spending tracker"}),Object(d.jsxs)("h3",{children:["Your budget: ",t]}),Object(d.jsxs)("h3",{children:["Sum of expenses: ",n]}),Object(d.jsxs)("h3",{children:["Comparsion with the budget: ",c]})]})},m=function(e){var t=e.budget,n=e.setBudget;return Object(d.jsxs)("div",{className:"col",children:[Object(d.jsx)("h2",{children:"Set your budget"}),Object(d.jsx)("form",{children:Object(d.jsx)("input",{value:t,onChange:function(e){var t=e.target;return n(t.value)},type:"number"})})]})},w=function(e){var t=e.euros,n=e.desc,c=e.setEuros,r=e.setDesc,s=e.addExpense;return Object(d.jsxs)("div",{className:"col",children:[Object(d.jsx)("h2",{children:"Add a new expense"}),Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault(),s({euros:t,desc:n})},children:[Object(d.jsx)("h3",{children:"Euros"}),Object(d.jsx)("input",{value:t,onChange:function(e){var t=e.target;return c(t.value)},type:"number"}),Object(d.jsx)("h3",{children:"Description"}),Object(d.jsx)("input",{value:n,onChange:function(e){var t=e.target;return r(t.value)}}),Object(d.jsx)("button",{type:"submit",children:"OK"})]})]})},E="/api/expenses",S=null,k={setToken:function(e){S="bearer ".concat(e)},getExpenses:function(){var e=Object(x.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get("".concat(E,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),postExpense:function(){var e=Object(x.a)(p.a.mark((function e(t){var n,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:S}},e.next=3,O.a.post(E,t,n);case 3:return c=e.sent,console.log(c.data),e.abrupt("return",c.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteExpense:function(){var e=Object(x.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.delete("".concat(E,"/").concat(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},y=function(e){var t=e.expenses,n=e.addExpense,r=Object(c.useState)(""),s=Object(o.a)(r,2),a=s[0],u=s[1],i=Object(c.useState)(""),j=Object(o.a)(i,2),l=j[0],b=j[1],p=Object(c.useState)(""),x=Object(o.a)(p,2),h=x[0],O=x[1],f=Object(c.useState)({}),v=Object(o.a)(f,2),E=(v[0],v[1]),S=t.reduce((function(e,t){return e+parseInt(t.euros)}),0),y=a-S;return Object(c.useEffect)((function(){var e=window.localStorage.getItem("loggedUser");if(e){var t=JSON.parse(e);E(t),k.setToken(t.token)}}),[E]),Object(d.jsxs)("div",{className:"container",children:[Object(d.jsxs)("div",{className:"row-1",children:[Object(d.jsx)(g,{budget:a,sum:S,comparison:y}),Object(d.jsx)(m,{budget:a,setBudget:u})]}),Object(d.jsx)("div",{className:"row-2",children:Object(d.jsx)(w,{euros:l,desc:h,setEuros:b,setDesc:O,addExpense:n})})]})},N=function(e){var t=e.expenses,n=e.removeExpense;return Object(d.jsx)("div",{className:"container",children:Object(d.jsx)("table",{children:Object(d.jsxs)("tbody",{children:[Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"Euros"}),Object(d.jsx)("th",{children:"Description"}),Object(d.jsx)("th",{children:"Remove"})]}),t.map((function(e){return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:e.euros}),Object(d.jsx)("td",{children:e.desc}),Object(d.jsx)("td",{children:Object(d.jsx)("button",{onClick:function(){return n(e.id)},children:"Remove"})})]},e.id)}))]})})})},I=n(14),C=n(32),U=["component","expenses","addExpense","removeExpense"],D=function(e){var t=e.component,n=e.expenses,c=e.addExpense,r=e.removeExpense,s=Object(C.a)(e,U),a=window.localStorage.getItem("loggedUser");return Object(d.jsx)(i.b,Object(I.a)(Object(I.a)({},s),{},{render:function(e){return a?Object(d.jsx)(t,Object(I.a)(Object(I.a)({},e),{},{expenses:n,addExpense:c,removeExpense:r})):Object(d.jsx)(i.a,{to:{pathname:"/"}})}}))},J=function(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1];Object(c.useEffect)((function(){var e=window.localStorage.getItem("loggedUser"),t=JSON.parse(e);t&&k.getExpenses(t.id).then((function(e){r(e)})).catch((function(e){console.log("unable to fetch data")}))}),[r]);return Object(d.jsx)("div",{children:Object(d.jsxs)(u.a,{children:[Object(d.jsx)(l,{}),Object(d.jsxs)(i.d,{children:[Object(d.jsx)(i.b,{exact:!0,path:"/",children:Object(d.jsx)(v,{})}),Object(d.jsx)(D,{exact:!0,path:"/home",component:y,expenses:n,addExpense:function(e){k.postExpense(e).then((function(e){r(n.concat(e))})).catch((function(e){console.log("error in post request")}))}}),Object(d.jsx)(D,{exact:!0,path:"/expenses",component:N,expenses:n,removeExpense:function(e){k.deleteExpense(e).then((function(){var t=n.filter((function(t){return t.id!==e}));r(t)}))}})]})]})})};a.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(J,{})}),document.getElementById("root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.a3595f5b.chunk.js.map