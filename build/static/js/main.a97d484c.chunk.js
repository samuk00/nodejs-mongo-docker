(this["webpackJsonpexpense-tracker"]=this["webpackJsonpexpense-tracker"]||[]).push([[0],{37:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),s=n(30),a=n.n(s),o=(n(37),n(6)),u=n(11),i=n(3),j={userLogout:function(){window.localStorage.removeItem("loggedUser")},userLogin:function(e){window.localStorage.setItem("loggedUser",e)}},l=n(0),d=function(){var e=Object(i.g)(),t=null===window.localStorage.getItem("loggedUser")?{display:"none"}:{display:"block"};return Object(l.jsxs)("div",{className:"nav",children:[Object(l.jsx)("h2",{children:"EXPENSE TRACKER"}),Object(l.jsxs)("ul",{style:t,children:[Object(l.jsx)("li",{children:Object(l.jsx)(u.b,{to:"/home",children:"Home"})}),Object(l.jsx)("li",{children:Object(l.jsx)(u.b,{to:"/expenses",children:"View expenses"})}),Object(l.jsx)("li",{children:Object(l.jsx)("button",{onClick:function(){j.userLogout(),e.push("/"),e.go("/")},children:"Logout"})})]})]})},b=n(4),p=n.n(b),x=n(9),h=n(10),O=n.n(h),f={login:function(){var e=Object(x.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},v=function(){var e=Object(r.useState)(""),t=Object(o.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(""),a=Object(o.a)(s,2),u=a[0],d=a[1],b=Object(r.useState)(""),h=Object(o.a)(b,2),O=h[0],v=h[1],g=Object(i.g)();Object(r.useEffect)((function(){window.localStorage.getItem("loggedUser")&&g.push("/home")}));var m=function(){var e=Object(x.a)(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,f.login({username:n,password:u});case 4:r=e.sent,j.userLogin(JSON.stringify(r)),c(""),d(""),g.push("/home"),g.go("/home"),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),v("Invalid username or password"),setTimeout((function(){v(null)}),3e3);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(l.jsxs)("div",{className:"login-form",children:[Object(l.jsx)("h1",{children:"Login"}),Object(l.jsxs)("form",{onSubmit:m,children:[Object(l.jsx)("h2",{children:"Username"}),Object(l.jsx)("input",{onChange:function(e){var t=e.target;return c(t.value)},value:n}),Object(l.jsx)("h2",{children:"Password"}),Object(l.jsx)("input",{onChange:function(e){var t=e.target;return d(t.value)},value:u,type:"password"}),Object(l.jsx)("button",{type:"submit",children:"Sign in"}),Object(l.jsx)("div",{children:O})]})]})},g={register:function(){var e=Object(x.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.post("/api/users",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},m=function(){var e=Object(r.useState)(""),t=Object(o.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(""),a=Object(o.a)(s,2),u=a[0],i=a[1],j=Object(r.useState)(""),d=Object(o.a)(j,2),b=d[0],h=d[1],O=function(){var e=Object(x.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,g.register({username:n,password:u});case 4:c(""),i(""),h("Account successfully created"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),h("Username must be atleast 4 characters and password 6 characters"),setTimeout((function(){h(null)}),3e3);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(l.jsxs)("div",{className:"login-form",children:[Object(l.jsx)("h1",{children:"Register"}),Object(l.jsxs)("form",{onSubmit:O,children:[Object(l.jsx)("h2",{children:"Username"}),Object(l.jsx)("input",{value:n,onChange:function(e){var t=e.target;return c(t.value)}}),Object(l.jsx)("h2",{children:"Password"}),Object(l.jsx)("input",{onChange:function(e){var t=e.target;return i(t.value)},value:u,type:"password"}),Object(l.jsx)("button",{type:"submit",children:"Sign in"}),Object(l.jsx)("div",{children:b})]})]})},w=function(){return Object(l.jsxs)("div",{style:{display:"flex",margin:"auto",width:"70%"},children:[Object(l.jsx)(v,{}),Object(l.jsx)(m,{})]})},E=function(e){var t=e.budget,n=e.sum,r=e.comparison;return Object(l.jsxs)("div",{className:"col",children:[Object(l.jsx)("h2",{children:"Welcome to use spending tracker"}),Object(l.jsxs)("h3",{children:["Your budget: ",t]}),Object(l.jsxs)("h3",{children:["Sum of expenses: ",n]}),Object(l.jsxs)("h3",{children:["Comparsion with the budget: ",r]})]})},S=function(e){var t=e.budget,n=e.setBudget;return Object(l.jsxs)("div",{className:"col",children:[Object(l.jsx)("h2",{children:"Set your budget"}),Object(l.jsx)("form",{children:Object(l.jsx)("input",{value:t,onChange:function(e){var t=e.target;return n(t.value)},type:"number"})})]})},y=function(e){var t=e.euros,n=e.desc,r=e.setEuros,c=e.setDesc,s=e.addExpense;return Object(l.jsxs)("div",{className:"col",children:[Object(l.jsx)("h2",{children:"Add a new expense"}),Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),s({euros:t,desc:n})},children:[Object(l.jsx)("h3",{children:"Euros"}),Object(l.jsx)("input",{value:t,onChange:function(e){var t=e.target;return r(t.value)},type:"number"}),Object(l.jsx)("h3",{children:"Description"}),Object(l.jsx)("input",{value:n,onChange:function(e){var t=e.target;return c(t.value)}}),Object(l.jsx)("button",{type:"submit",children:"OK"})]})]})},k="/api/expenses",N=null,C={setToken:function(e){N="bearer ".concat(e)},getExpenses:function(){var e=Object(x.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get("".concat(k,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),postExpense:function(){var e=Object(x.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:N}},e.next=3,O.a.post(k,t,n);case 3:return r=e.sent,console.log(r.data),e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteExpense:function(){var e=Object(x.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.delete("".concat(k,"/").concat(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},I=function(e){var t=e.expenses,n=e.addExpense,c=Object(r.useState)(""),s=Object(o.a)(c,2),a=s[0],u=s[1],i=Object(r.useState)(""),j=Object(o.a)(i,2),d=j[0],b=j[1],p=Object(r.useState)(""),x=Object(o.a)(p,2),h=x[0],O=x[1],f=Object(r.useState)({}),v=Object(o.a)(f,2),g=(v[0],v[1]),m=t.reduce((function(e,t){return e+parseInt(t.euros)}),0),w=a-m;return Object(r.useEffect)((function(){var e=window.localStorage.getItem("loggedUser");if(e){var t=JSON.parse(e);g(t),C.setToken(t.token)}}),[g]),Object(l.jsxs)("div",{className:"container",children:[Object(l.jsxs)("div",{className:"row-1",children:[Object(l.jsx)(E,{budget:a,sum:m,comparison:w}),Object(l.jsx)(S,{budget:a,setBudget:u})]}),Object(l.jsx)("div",{className:"row-2",children:Object(l.jsx)(y,{euros:d,desc:h,setEuros:b,setDesc:O,addExpense:n})})]})},U=function(e){var t=e.expenses,n=e.removeExpense;return Object(l.jsx)("div",{className:"container",children:Object(l.jsx)("table",{children:Object(l.jsxs)("tbody",{children:[Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{children:"Euros"}),Object(l.jsx)("th",{children:"Description"}),Object(l.jsx)("th",{children:"Remove"})]}),t.map((function(e){return Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:e.euros}),Object(l.jsx)("td",{children:e.desc}),Object(l.jsx)("td",{children:Object(l.jsx)("button",{onClick:function(){return n(e.id)},children:"Remove"})})]},e.id)}))]})})})},D=n(14),L=n(32),J=["component","expenses","addExpense","removeExpense"],R=function(e){var t=e.component,n=e.expenses,r=e.addExpense,c=e.removeExpense,s=Object(L.a)(e,J),a=window.localStorage.getItem("loggedUser");return Object(l.jsx)(i.b,Object(D.a)(Object(D.a)({},s),{},{render:function(e){return a?Object(l.jsx)(t,Object(D.a)(Object(D.a)({},e),{},{expenses:n,addExpense:r,removeExpense:c})):Object(l.jsx)(i.a,{to:{pathname:"/"}})}}))},T=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1];Object(r.useEffect)((function(){var e=window.localStorage.getItem("loggedUser"),t=JSON.parse(e);t&&C.getExpenses(t.id).then((function(e){c(e)})).catch((function(e){console.log("unable to fetch data")}))}),[c]);return Object(l.jsx)("div",{children:Object(l.jsxs)(u.a,{children:[Object(l.jsx)(d,{}),Object(l.jsxs)(i.d,{children:[Object(l.jsx)(i.b,{exact:!0,path:"/",children:Object(l.jsx)(w,{})}),Object(l.jsx)(R,{exact:!0,path:"/home",component:I,expenses:n,addExpense:function(e){C.postExpense(e).then((function(e){c(n.concat(e))})).catch((function(e){console.log("error in post request")}))}}),Object(l.jsx)(R,{exact:!0,path:"/expenses",component:U,expenses:n,removeExpense:function(e){C.deleteExpense(e).then((function(){var t=n.filter((function(t){return t.id!==e}));c(t)}))}})]})]})})};a.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(T,{})}),document.getElementById("root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.a97d484c.chunk.js.map